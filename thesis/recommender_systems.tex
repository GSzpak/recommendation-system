%
% Niniejszy plik stanowi przyk³ad formatowania pracy magisterskiej na
% Wydziale MIM UW.  Szkielet u¿ytych poleceñ mo¿na wykorzystywaæ do
% woli, np. formatujac wlasna prace.
%
% Zawartosc merytoryczna stanowi oryginalnosiagniecie
% naukowosciowe Marcina Wolinskiego.  Wszelkie prawa zastrze¿one.
%
% Copyright (c) 2001 by Marcin Woliñski <M.Wolinski@gust.org.pl>
% Poprawki spowodowane zmianami przepisów - Marcin Szczuka, 1.10.2004
% Poprawki spowodowane zmianami przepisow i ujednolicenie 
% - Seweryn Kar³owicz, 05.05.2006
% dodaj opcjê [licencjacka] dla pracy licencjackiej
\documentclass[licencjacka]{pracamgr}

\usepackage{polski}
\usepackage{amssymb}
%Jesli uzywasz kodowania polskich znakow ISO-8859-2 nastepna linia powinna byc 
%odkomentowana
\usepackage[latin2]{inputenc}
%Jesli uzywasz kodowania polskich znakow CP-1250 to ta linia powinna byc 
%odkomentowana
%\usepackage[cp1250]{inputenc}

% Dane magistranta:

\author{Grzegorz Szpak}

\nralbumu{319400}

\title{Systemy rekomendacyjne oparte o wspóln± filtracjê}

\tytulang{Recommender systems based on collaborative filtering}

%kierunek: Matematyka, Informatyka, ...
\kierunek{Matematyka}

% informatyka - nie okreslamy zakresu (opcja zakomentowana)
% matematyka - zakres moze pozostac nieokreslony,
% a jesli ma byc okreslony dla pracy mgr,
% to przyjmuje jedna z wartosci:
% {metod matematycznych w finansach}
% {metod matematycznych w ubezpieczeniach}
% {matematyki stosowanej}
% {nauczania matematyki}
% Dla pracy licencjackiej mamy natomiast
% mozliwosc wpisania takiej wartosci zakresu:
% {Jednoczesnych Studiow Ekonomiczno--Matematycznych}

% \zakres{Tu wpisac, jesli trzeba, jedna z opcji podanych wyzej}

% Praca wykonana pod kierunkiem:
% (podaæ tytu³/stopieñ imiê i nazwisko opiekuna
% Instytut
% ew. Wydzia³ ew. Uczelnia (je¿eli nie MIM UW))
\opiekun{prof. Andrzeja Skowrona / dr. Marcina Szczuki\\
  Instytut Matematyki / Instytut Informatyki\\
  }

% miesi±c i~rok:
\date{Lipiec 2016}

%Podaæ dziedzinê wg klasyfikacji Socrates-Erasmus:
\dziedzina{ 
%11.0 Matematyka, Informatyka:\\ 
11.1 Matematyka\\ 
%11.2 Statystyka\\ 
%11.3 Informatyka\\ 
%11.4 Sztuczna inteligencja\\ 
%11.5 Nauki aktuarialne\\
%11.9 Inne nauki matematyczne i informatyczne
}

%Klasyfikacja tematyczna wedlug AMS (matematyka) lub ACM (informatyka)
\klasyfikacja{68T05 Learning and adaptive systems}

% S³owa kluczowe:
\keywords{eksploracja danych, systemy rekomendacyjne, wspólna filtracja, algorytm k - najbli¿szych s±siadów}

% Tu jest dobre miejsce na Twoje w³asne makra i~¶rodowiska:
\newtheorem{defi}{Definicja}[section]

% koniec definicji

\begin{document}
\maketitle

%tu idzie streszczenie na strone poczatkowa
\begin{abstract}
  W pracy przedstawiono analizê systemów rekomendacyjnych opartych
  na metodzie wspólnej filtracji. Zaprezentowane zosta³y dwa podstawowe typy
  wspólnej filtracji - filtracja oparta o u¿ytkowników oraz filtracja oparta o
  przedmioty. Autor skupia siê na implementacji tej metody opartej na algorytmie
  k - najbli¿szych s±siadów. Przedstawione zostaj± ró¿ne warianty poszczególnych
  sk³adowych algorytmu (wybór funkcji podobieñstwa, rozmiar s±siedztwa, sposób ustalania
  oceny na podstawie ocen s±siadów) i ich wp³yw na jako¶æ systemu.
\end{abstract}

\tableofcontents
%\listoffigures
%\listoftables

\chapter{Wprowadzenie}
%\addcontentsline{toc}{chapter}{Wprowadzenie}
\section{Systemy rekomendacyjne i ich znaczenie}
Ka¿dego dnia stawiani jeste¶my przed szeregiem wyborów. Któr± ksi±¿kê przeczytaæ?
Jaki film obejrzeæ? Któr± stronê internetow± odwiedziæ? Jako ¿e ilo¶æ informacji w
otaczaj±cym nas ¶wiecie ro¶nie du¿o szybciej ni¿ nasze mo¿liwo¶ci poznawcze, konieczne sta³o siê stworzenie technologii, która bêdzie w stanie
wybraæ informacje najbardziej dla nas u¿yteczne. Tak± rolê we wspó³czesnych aplikacjach internetowych pe³ni± systemy rekomendacyjne. Bazuj±c na dotychczasowej aktywno¶ci u¿ytkownika, systemy rekomendacyjne staraj± siê 
przewidzieæ jego ocenê wobec danego przedmiotu. Terminy "ocena" i "przedmiot" s±
oczywi¶cie ogólne i w zale¿no¶ci od zastosowania mog± reprezentowaæ ró¿ne zjawiska - od wystawienia rzeczywistej oceny filmowi, przez kupno przedmiotu w sklepie internetowym, po fakt do³±czenia do grupy na portalu spo³eczno¶ciowym.

Przydatno¶æ systemów rekomendacyjnych obrazuje najlepiej tak zwany "fenomen d³ugiego ogona" (ang. \textit{long tail phenomenon}). + ile w google netflix
\section{Fenomen "d³ugiego ogona"}

\section{Typy systemów rekomendacyjnych}
W zale¿no¶ci od zastosowanych metod, systemy rekomendacyjne dzieli siê na 4 kategorie:
\begin{enumerate}
\item \textbf{Systemy bazuj±ce na wspólnej filtracji (ang. \textit{collaborative filtering})}

    Podej¶cie wspólnej filtracji polega na wyznaczaniu preferencji danego u¿ytkownika
    bazuj±c na preferencjach u¿ytkowników o podobnym gu¶cie. Podobieñstwo to jest
    wyznaczane na podstawie wcze¶niejszych zachowañ u¿ytkownika. Ze wzglêdu na
    prostotê implementacji i wysok± wydajno¶æ, wspólne filtrowanie
    jest najbardziej popularn± i najczê¶ciej stosowan± technikê rekomendacji.
    Dodatkow± zalet± tej metody jest jej elastyczno¶æ i mo¿liwo¶æ stosowania w wielu
    dziedzinach - system oparty na wspólnej filtracji jest w stanie udzielaæ dok³adnych
    rekomendacji bez potrzeby "zrozumienia" samego przedmiotu.
    
    W pozosta³ej czê¶ci pracy autor skupi siê na ró¿nych wariantach
    \textit{collaborative filtering} i spróbuje
    w oparciu o tê technikê zbudowaæ jak najbardziej wydajny system rekomendacji.

\item \textbf{Systemy oparte na zawarto¶ci (ang. \textit{content - based}))}

    To podej¶cie koncentruje siê na charakterystyce samych przedmiotów. Przedmiot
    reprezentowany jest przez zbiór cech. Cechami filmu
    mog± byæ na przyk³ad: gatunek, rok produkcji, obsada aktorska, re¿yser.
    Na podstawie warto¶ci atrybutów wyznaczane jest podobieñstwo miêdzy przedmiotami,
    nastêpnie u¿ytkownikowi prezentowane s± przedmioty podobne do dotychczas
    polubionych. Przyk³adowo, je¶li u¿ytkownik czêsto ogl±da³ filmy sensacyjne
    wyre¿yserowane przez Martina Scorsese, system bêdzie rekomendowa³ inne filmy
    tego re¿ysera.
    
    Metoda bazuj±ca na zawarto¶ci tak¿e jest szeroko stosowana. Do jej zalet zaliczyæ
    mo¿na:
    \begin{itemize}
        \item niski poziom skomplikowania
        \item w przeciwieñstwie do wspólnej filtracji, rekomendacja dla danego u¿ytkownika
        nie zale¿y od ocen innych u¿ytkowników
        \item transparentno¶æ - rekomendacje mog± byæ w ³atwy sposób wyt³umaczone
        na podstawie modelu (które cechy przedmiotu zadecydowa³y o jego wyborze)
        \item mo¿liwo¶æ rekomendacji przedmiotów nieocenionych jeszcze przez
        ¿adnego u¿ytkownika.
    \end{itemize}       
    
    Tego typu podej¶cie wymaga jednak czêsto wiedzy eksperckiej przy tworzeniu
    atrybutów przedmiotów. Z racji swojej natury, s³abo sprawdza siê te¿ przy
    rekomendacji przedmiotów o innej charakterystyce ni¿ dotychczas ocenione przez
    u¿ytkownika.

\item \textbf{Systemy bazuj±ce na osobowo¶ci}

    To stosunkowo nowe podej¶cie, zosta³o zaproponowane przez Ricardo Buettnera w [3].
    Polega na stworzeniu profilu osobowo¶ciowego u¿ytkownika na podstawie jego zachowañ
    w sieciach spo³eczno¶ciowych i prezentowaniu tre¶ci dopasowanych do tego profilu.

\item \textbf{Systemy hybrydowe}

    Polegaj± na ³±czeniu wy¿ej opisanych technik. Systemy hybrydowe mog± byæ
    implementowane w wielu wersjach: przez wykorzystanie wspólnej filtracji oraz
    rekomendacji opartej na zawarto¶ci osobno, a nastêpnie po³±czeniu wyników,
    przez wykorzystanie dodatkowej wiedzy o u¿ytkownikach czy przedmiotach
    w metodzie collaborative filtering czy przez zunifikowanie ró¿nych podej¶æ w jeden
    model. £±czenie ró¿nych podej¶æ mo¿e czêsto wyra¼nie podnie¶æ jako¶æ
    rekomendacji. Wad± tego typu systemów jest zwykle wysoki poziom skomplikowania.
\end{enumerate}

\section{The Netflix Prize}
Do znacznego rozwoju badañ nad systemami rekomendacyjnymi przyczyni³
siê konkurs The Netflix Prize, zorganizowany przez internetow± wypo¿yczalniê filmów Netflix\footnote{https://www.netflix.com} w 2006 roku. Konkurs polega³ na przewidywaniu ocen, jakie u¿ytkownicy wystawiliby filmom, na podstawie historycznych danych. 
Opublikowany zbiór treningowy zawiera³ 100,480,507 ocen wystawionych przez
480,189 u¿ytkowników 17,770 filmom. Aby otrzymaæ g³ówn± nagrodê - \$1,000,000 - 
nale¿a³o poprawiæ wynik algorytmu firmy Netflix (o nazwie Cinematch) o co najmniej 10\%.
Zawody zosta³y rozstrzygniête dopiero w roku 2009, kiedy algorytm zespo³u BellKor's Pragmatic Chaos poprawi³ wynik algorytmu Cinematch o 10.6\%. Zwyciêski
algorytm by³ algorytmem hybrydowym opartym miêdzy innymi na wspólnej filtracji,
rozk³adzie SVD macierzy oraz wzmacnianych drzewach decyzyjnych (ang.
\textit{gradient boosted decision trees}).

\chapter{Formalizacja problemu rekomendacji}\label{r:definitions}
\section{Podstawowe pojêcia}
    Dwoma glównymi pojêciami wyorzystywanymi w systemach rekomendacyjnych s±
    \textit{U¿ytkownik} oraz \textit{przedmiot}. U¿ytkownicy maj± preferencje wobec
    niektórych przedmiotów, nazywane \textit{ocen±}.
    Preferencje s± czêsto reprezentowane jako zbiór trójek $(\textit{u¿ytkownik, przedmiot, ocena})$. Jak wspomniano wcze¶niej, to, czym dok³adnie jest \textit{ocena}, zale¿y od
    charakteru serwisu. Ocena mo¿e byæ liczb± ca³kowit± pochodz±c± z okre¶lonego
    przedzia³u (przyk³adowo: piêciopunktowa skala ocen w serwisie Netflix) lub mieæ
    postaæ binarn± (u¿ywane w serwisach spo³eczno¶ciowych "lubiê" / "nie lubiê").
    Unarne oceny, jak na przyk³ad informacja, czy u¿ytkownik kupi³ dany przedmiot,
    s± z kolei zwykle wykorzystywane w sklepach internetowych.
    
    \begin{defi}\label{macierz}
      Zbiór wszystkich trójek $(\textit{U¿ytkownik, przedmiot, ocena})$ tworzy macierz,
      któr± nazwiemy \textbf{macierz± u¿yteczno¶ci} lub \textbf{macierz± ocen}.
    \end{defi}
    Przyk³ad macierzy u¿yteczno¶ci prezentuje tabela 1 TODO

\section{Oznaczenia}    
    Niech $U = \{u_1,u_2,\cdots,u_k\}$ oznacza zbiór u¿ytkowników, $I = \{i_1,i_2,\cdots,i_l\}$ - zbiór przedmiotów, a $R= \{r_1,r_2,\cdots,r_m\}$ - zbiór ocen Do ka¿dego u¿ytkownika $u$ przypisany jest zbiór
    $I_u \subseteq I$ ocenionych przez niego przedmiotów. Analogicznie, $U_i \subseteq U$
    oznaczaæ bêdzie zbiór u¿ytkowników, którzy ocenili przedmiot $i$. Niech dalej $M$
    reprezentuje macierz u¿yteczno¶ci, gdzie $r_{ui}$ jest ocen± udzielon±
    przedmiotowi $i$ przez u¿ytkownika $u$, a $r_u$ i $r_i$ - wektorami ocen
    (odpowiednio) danego u¿ytkownika oraz danego przedmiotu.
    
\section{Formalna definicja problemu}
    Przy ocenie jako¶ci systemu rekomendacyjnego definiuje siê zwykle ([1], [2] TODO)
    dwa problemy:
    \begin{enumerate}
    \item Zadanie rekomendacji: maj±c danego u¿ytkownika $u$, wyznaczyæ $n$
    przedmiotów najbardziej pasuj±cych do gustu tego u¿ytkownika.

    \item Zadanie regresji - niech $S_{train} \subseteq U \times I \times R$ bêdzie
    zbiorem ocen dostêpnych w systemie, a $S_{test} \subseteq U \times I$ -
    zbiorem par $(\textit{u¿ytkownik, przedmiot})$, dla których preferencje s± nieznane.
    Celem jest nauczenie funkcji $f: U \times I \rightarrow R$, która bêdzie
    minimalizowaæ pewn± funkcjê b³êdu $e: (U \times I \rightarrow R) \times (U \times I) \rightarrow \mathbb{R}$.
    
    Dwie najczê¶ciej u¿ywane funkcje straty to ¶redni bezwzglêdny b³±d
    (ang. \textit{Mean Absolute Error}, MAE):
    \begin{equation} \label{mae}
        MAE(f, S_{test}) = \frac{1}{S_{test}} \sum_{(u,i) \in S_{test}} |f(u,i) - r_ui|
    \end{equation}
    oraz pierwiastek b³êdu ¶redniokwadratowego
    (ang. \textit{Root Mean Squared Error}, RMSE):
    \begin{equation} \label{rmse}
        RMSE(f, S_{test}) = \sqrt{\frac{1}{S_{test}} \sum_{(u,i) \in S_{test}} (f(u,i) - r_ui)^2}
    \end{equation}
    
    \end{enumerate}
    W dalszej czê¶ci pracy autor skupi siê na problemie rekomendacji sformu³owanym
    jako problem regresji.
\chapter{Wspólna filtracja}\label{r:filtracja}    

\section{Filtracja w oparciu o u¿ytkowników}
    Najczê¶ciej u¿ywan± wersj± metody wspólnej filtracji jest podej¶cie oparte
    na algorytmie najbli¿szych s±siadów. Schemat dzia³ania algorytmu przy wyznaczaniu
    $r_ui$ polega kolejno na:
    \begin{enumerate}
        \item TODO
        \item Wyborze $k$ u¿ytkowników o 
    \end{enumerate}
    Schemat algorytmu prezentuje rys 1 TODO
\subsection{Miary podobieñstwa}\label{r:similarity}

\subsection{Filtracja w oparciu o przedmioty}

\chapter{Wp³yw funkcji podobieñstwa na jako¶æ predykcji}\label{r:experiments}

\chapter{Wyznaczanie s±siedztwa w algorytmie kNN}\label{r:neighbourhood_size}

\chapter{Metody wyznaczania oceny na podstawie ocen s±siadów}\label{r:result_calc}

\chapter{Podsumowanie}

W~pracy przedstawiono pierwsz± efektywn± implementacjê blabalizatora
ró¿nicowego.  Umiejêtno¶æ wykonania blabalizy numerycznej dla danych
,,z ¿ycia'' stanowi dla blabalii fetorycznej podobny prze³om, jak dla
innych dziedzin wiedzy stanowi³o og³oszenie teorii Miko³aja Kopernika
i~Gryzybór G³ombaskiego.  Z~pewno¶ci± w~rozpocznynaj±cym siê XXI wieku
bêdziemy obserwowaæ rozkwit blabalii fetorycznej.

Trudno przewidzieæ wszystkie nowe mo¿liwo¶ci, ale te co bardziej
oczywiste mo¿na wskazaæ ju¿ teraz.  S± to:
\begin{itemize}
\item degryzmolizacja wieñców telecentrycznych,
\item realizacja zimnej reakcji lambliarnej,
\item loty celulityczne,
\item dok³adne obliczenie wieku Wszech¶wiata.
\end{itemize}

\section{Perspektywy wykorzystania w~przemy¶le}

Ze wzglêdu na znaczenie strategiczne wyników pracy ten punkt uleg³
utajnieniu.

\appendix

\chapter{G³ówna pêtla programu zapisana w~jêzyku T\=oFoo}

\begin{verbatim}
[[foo]{,}[[a3,(([(,),{[[]]}]),
  [1; [{,13},[[[11],11],231]]].
  [13;[!xz]].
  [42;[{,x},[[2],{'a'},14]]].
  [br;[XQ*10]].
 ), 2q, for, [1,]2, [..].[7]{x}],[(((,[[1{{123,},},;.112]],
        else 42;
   . 'b'.. '9', [[13141],{13414}], 11),
 [1; [[134,sigma],22]].
 [2; [[rho,-],11]].
 )[14].
 ), {1234}],]. [map [cc], 1, 22]. [rho x 1]. {22; [22]},
       dd.
 [11; sigma].
        ss.4.c.q.42.b.ll.ls.chmod.aux.rm.foo;
 [112.34; rho];
        001110101010101010101010101010101111101001@
 [22%f4].
 cq. rep. else 7;
 ]. hlt
\end{verbatim}

\chapter{Przyk³adowe dane wej¶ciowe algorytmu}

\begin{center}
  \begin{tabular}{rrr}
    $\alpha$ & $\beta$ & $\gamma_7$ \\
    901384 & 13784 & 1341\\
    68746546 & 13498& 09165\\
    918324719& 1789 & 1310 \\
    9089 & 91032874& 1873 \\
    1 & 9187 & 19032874193 \\
    90143 & 01938 & 0193284 \\
    309132 & $-1349$ & $-149089088$ \\
    0202122 & 1234132 & 918324098 \\
    11234 & $-109234$ & 1934 \\
  \end{tabular}
\end{center}

\chapter{Przyk³adowe wyniki blabalizy
    (ze~wspó³czynnikami~$\sigma$-$\rho$)}

\begin{center}
  \begin{tabular}{lrrrr}
    & Wspó³czynniki \\
    & G³ombaskiego & $\rho$ & $\sigma$ & $\sigma$-$\rho$\\
    $\gamma_{0}$ & 1,331 & 2,01 & 13,42 & 0,01 \\
    $\gamma_{1}$ & 1,331 & 113,01 & 13,42 & 0,01 \\
    $\gamma_{2}$ & 1,332 & 0,01 & 13,42 & 0,01 \\
    $\gamma_{3}$ & 1,331 & 51,01 & 13,42 & 0,01 \\
    $\gamma_{4}$ & 1,332 & 3165,01 & 13,42 & 0,01 \\
    $\gamma_{5}$ & 1,331 & 1,01 & 13,42 & 0,01 \\
    $\gamma_{6}$ & 1,330 & 0,01 & 13,42 & 0,01 \\
    $\gamma_{7}$ & 1,331 & 16435,01 & 13,42 & 0,01 \\
    $\gamma_{8}$ & 1,332 & 865336,01 & 13,42 & 0,01 \\
    $\gamma_{9}$ & 1,331 & 34,01 & 13,42 & 0,01 \\
    $\gamma_{10}$ & 1,332 & 7891432,01 & 13,42 & 0,01 \\
    $\gamma_{11}$ & 1,331 & 8913,01 & 13,42 & 0,01 \\
    $\gamma_{12}$ & 1,331 & 13,01 & 13,42 & 0,01 \\
    $\gamma_{13}$ & 1,334 & 789,01 & 13,42 & 0,01 \\
    $\gamma_{14}$ & 1,331 & 4897453,01 & 13,42 & 0,01 \\
    $\gamma_{15}$ & 1,329 & 783591,01 & 13,42 & 0,01 \\
  \end{tabular}
\end{center}

\begin{thebibliography}{99}
\addcontentsline{toc}{chapter}{Bibliografia}

\bibitem[Bea65]{beaman} Juliusz Beaman, \textit{Morbidity of the Jolly
    function}, Mathematica Absurdica, 117 (1965) 338--9.

\bibitem[Blar16]{eb1} Elizjusz Blarbarucki, \textit{O pewnych
    aspektach pewnych aspektów}, Astrolog Polski, Zeszyt 16, Warszawa
  1916.

\bibitem[Fif00]{ffgg} Filigran Fifak, Gizbert Gryzogrzechotalski,
  \textit{O blabalii fetorycznej}, Materia³y Konferencji Euroblabal
  2000.

\bibitem[Fif01]{ff-sr} Filigran Fifak, \textit{O fetorach
    $\sigma$-$\rho$}, Acta Fetorica, 2001.

\bibitem[G³omb04]{grglo} Gryzybór G³ombaski, \textit{Parazytonikacja
    blabiczna fetorów --- nowa teoria wszystkiego}, Warszawa 1904.

\bibitem[Hopp96]{hopp} Claude Hopper, \textit{On some $\Pi$-hedral
    surfaces in quasi-quasi space}, Omnius University Press, 1996.

\bibitem[Leuk00]{leuk} Lechoslav Leukocyt, \textit{Oval mappings ab ovo},
  Materia³y Bia³ostockiej Konferencji Hodowców Drobiu, 2000.

\bibitem[Rozk93]{JR} Josip A.~Rozkosza, \textit{O pewnych w³asno¶ciach
    pewnych funkcji}, Pó³nocnopomorski Dziennik Matematyczny 63491
  (1993).

\bibitem[Spy59]{spyrpt} Mrowclaw Spyrpt, \textit{A matrix is a matrix
    is a matrix}, Mat. Zburp., 91 (1959) 28--35.

\bibitem[Sri64]{srinis} Rajagopalachari Sriniswamiramanathan,
  \textit{Some expansions on the Flausgloten Theorem on locally
    congested lutches}, J. Math.  Soc., North Bombay, 13 (1964) 72--6.

\bibitem[Whi25]{russell} Alfred N. Whitehead, Bertrand Russell,
  \textit{Principia Mathematica}, Cambridge University Press, 1925.

\bibitem[Zen69]{heu} Zenon Zenon, \textit{U¿yteczne heurystyki
    w~blabalizie}, M³ody Technik, nr~11, 1969.

\end{thebibliography}

\end{document}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% coding: latin-2
%%% End:
